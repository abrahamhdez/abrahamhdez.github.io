{"version":3,"sources":["app.js"],"names":["page","appointment","name","date","hour","services","startApp","showServices","showSection","changeTabs","pageButtons","hiddenButtons","clientName","clientDate","unableLastDay","clientTime","emptyAlert","showOverview","document","addEventListener","alert","createElement","text","color","classList","remove","textContent","add","querySelector","appendChild","setTimeout","formName","e","target","value","trim","length","formDate","actualDay","Date","getUTCDay","includes","preventDefault","formTime","chosenTime","chosenHour","split","console","log","addService","serviceObj","removeService","id","filter","service","backButton","nextButton","backPage","nextPage","querySelectorAll","forEach","tab","parseInt","dataset","async","file","fetch","db","json","servicios","servicio","nombre","precio","serviceName","servicePrice","serviceContainer","onclick","clickService","serviceId","error","element","tagName","parentElement","contains","firstChild","price","nextElementSibling","inputForm","year","getFullYear","month","getMonth","day","getDate","minDate","min","overviewDiv","removeChild","headingInfo","headingServices","msg","Object","values","innerHTML","servicesList","total","serviceItem","priceArray","totalAmount"],"mappings":"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","file":"bundle.js","sourcesContent":["let page = 2;\nconst appointment = {\n    name: '',\n    date: '',\n    hour: '',\n    services: []\n}\n\ndocument.addEventListener('DOMContentLoaded', function() {\n    startApp();\n});\n\nfunction startApp() {\n    // All functions here...\n    showServices();\n    showSection();\n    changeTabs();\n    pageButtons();\n    hiddenButtons();\n    clientName();\n    clientDate();\n    unableLastDay();\n    clientTime();\n    emptyAlert('',''); // White espace to avoid undefined\n    showOverview();\n}\n\nlet alert = document.createElement('p');\n\nfunction emptyAlert(text, color) {\n\n    alert.classList.remove('d-none')\n    alert.classList.remove('red-alert')\n    alert.classList.remove('green-alert')\n\n    alert.textContent = `${text}`;\n    alert.classList.add(`${color}-alert`);\n\n    const divTab = document.querySelector(`#tab-${page}`);\n    divTab.appendChild(alert);\n\n    setTimeout(() => {\n        alert.classList.add('d-none')\n    }, 5000)\n}\n\nfunction clientName() {\n    formName = document.querySelector('#name');\n\n    formName.addEventListener('input', e => {\n        const clientName = e.target.value.trim()\n\n        if (clientName === '' || clientName.length < 3) {\n            emptyAlert('Invalid name, too short, unless you are E.T. (I want to go home too)','red')\n        } else {\n            appointment.name = clientName;\n            emptyAlert(\"That's right, now fill the others please :)\",'green')\n        }\n    })\n}\n\nfunction clientDate() {\n    formDate = document.querySelector('#date');\n\n    formDate.addEventListener('input', e => {\n        const actualDay = new Date(e.target.value).getUTCDay();\n\n        // No labor days\n        if ([3].includes(actualDay)) {\n            \n            e.preventDefault();\n            formDate.value = '';\n            emptyAlert('Sorry. We don\\'t work on Wednesday :(','red')\n        } else {\n            appointment.date = formDate.value;\n        }\n\n    })\n}\n\nfunction clientTime() {\n    formTime = document.querySelector('#time');\n\n    formTime.addEventListener('input', e => {\n        \n        const chosenTime = e.target.value;\n        const chosenHour = chosenTime.split(':');\n\n        if (chosenHour[0] < 09 || chosenHour[0] > 18) {\n            emptyAlert('Sorry. We\\'re closed at that time :(','red')\n            formTime.value = '';\n        } else {\n            appointment.hour = chosenTime\n            emptyAlert(\"Perfect time :)\",'green')\n            console.log(appointment)\n        }\n    })\n}\n\nfunction addService(serviceObj) {\n    const {services} = appointment;\n\n    appointment.services = [...services, serviceObj]\n}\n\nfunction removeService(id) {\n    const {services} = appointment;\n    appointment.services = services.filter( service => service.id !== id);\n}\n\nfunction hiddenButtons() {\n    const backButton = document.querySelector('#back-btn');\n    const nextButton = document.querySelector('#next-btn');\n    if (page === 1) {\n        nextButton.classList.remove('hide');\n        backButton.classList.add('hide');\n    } else if (page === 3) {\n        backButton.classList.remove('hide');\n        nextButton.classList.add('hide');\n\n        showOverview();\n    } else {\n        backButton.classList.remove('hide');\n        nextButton.classList.remove('hide');\n    }\n}\n\nfunction pageButtons() {\n    const backButton = document.querySelector('#back-btn');\n    const nextButton = document.querySelector('#next-btn');\n\n    backButton.addEventListener('click', backPage)\n    nextButton.addEventListener('click', nextPage)\n}\n\nfunction backPage() {\n    if (page <= 3 && page >= 2) {\n        page--;\n        document.querySelector('.show-section').classList.remove('show-section');\n        document.querySelector('.active').classList.remove('active');\n        showSection();\n    }\n}\n\nfunction nextPage() {\n    if (page <= 2 && page >= 1) {\n        page++;\n        document.querySelector('.show-section').classList.remove('show-section');\n        document.querySelector('.active').classList.remove('active');\n        showSection();\n    }\n}\n\nfunction showSection() {\n    const actualSection = document.querySelector(`#tab-${page}`);\n    actualSection.classList.add('show-section');\n\n    // Add different style to current tab\n    const tab = document.querySelector(`[data-tab=\"${page}\"]`);\n    tab.classList.add('active');\n    hiddenButtons();\n}\n\nfunction changeTabs() {\n    const tabs = document.querySelectorAll('.tabs button');\n    tabs.forEach(tab => {\n        tab.addEventListener('click', e => {\n            e.preventDefault();\n\n            page = parseInt(e.target.dataset.tab);\n\n            document.querySelector('.show-section').classList.remove('show-section');\n            document.querySelector('.active').classList.remove('active');\n            \n            const section = document.querySelector(`#tab-${page}`);\n            section.classList.add('show-section');\n            const tab = document.querySelector(`[data-tab=\"${page}\"]`);\n            tab.classList.add('active');\n            hiddenButtons();\n        })\n    })\n}\n\nasync function showServices() {\n    try {\n        const file = await fetch('./servicios.json');\n        const db = await file.json();\n\n        const { servicios } = db;\n\n        servicios.forEach(servicio => {\n            const {id, nombre, precio} = servicio\n            \n            /* DOM Scripting */\n            const serviceName = document.createElement('p');\n            serviceName.textContent = nombre;\n            serviceName.classList.add('service-name');\n\n            const servicePrice = document.createElement('p');\n            servicePrice.textContent = `$ ${precio} MXN`;\n            servicePrice.classList.add('service-price');\n\n            const serviceContainer = document.createElement('div');\n            serviceContainer.classList.add('service');\n\n            serviceContainer.onclick = clickService;\n            serviceContainer.dataset.serviceId = id;\n\n            serviceContainer.appendChild(serviceName);\n            serviceContainer.appendChild(servicePrice);\n\n            const serviceList = document.querySelector('.services-list');\n            serviceList.appendChild(serviceContainer);\n        });\n\n    } catch (error) {\n        console.log(error)\n    }\n}\n\nfunction clickService(e) {\n    let element;\n\n    if (e.target.tagName === 'P') {\n        element = e.target.parentElement;\n    } else {\n        element = e.target;\n    }\n\n    if (element.classList.contains('select')) {\n        element.classList.remove('select');\n    \n        const id = parseInt(element.dataset.serviceId)\n        removeService(id);\n    } else {\n        element.classList.add('select');\n\n        const serviceObj = {\n            id: parseInt(element.dataset.serviceId),\n            name: element.firstChild.textContent,\n            price: element.firstChild.nextElementSibling.textContent\n        }\n\n        addService(serviceObj);\n    }\n}\n\nfunction unableLastDay() {\n    const inputForm = document.querySelector('#date')\n\n    const actualDay = new Date();\n    const year = actualDay.getFullYear();\n    const month = actualDay.getMonth() + 1;\n    const day = actualDay.getDate() + 1;\n\n    // Format YYYY-MM-DD, we need two digits, adding with ternary operator\n    const minDate = `${year}-${month < 10 ? `0${month}` : month}-${day < 10 ? `0${day}` : day}`\n    inputForm.min = minDate;\n}\n\nfunction showOverview() {\n    const overviewDiv = document.querySelector('.overview-content')\n    // overviewDiv.innerHTML = '';\n    while (overviewDiv.firstChild) {\n        overviewDiv.removeChild(overviewDiv.firstChild);\n    }\n\n    const headingInfo = document.createElement('h3')\n    const headingServices = document.createElement('h3')\n\n    headingInfo.textContent = 'Contact information';\n    headingServices.textContent = 'Chosen services';\n    overviewDiv.appendChild(headingInfo)\n    headingInfo.classList.add('d-none')\n\n    const msg = document.createElement('p');\n    msg.classList.add('overview-text');\n    msg.classList.add('text-center');\n    overviewDiv.appendChild(msg);\n\n    if(Object.values(appointment).includes('')){\n        msg.textContent = 'You must fill all the fields to see this section...';\n        return;\n    }\n\n    headingInfo.classList.remove('d-none')\n    msg.classList.remove('text-center');\n    const {name, date, hour, services} = appointment;\n\n    msg.innerHTML = `<strong>Name:</strong> ${name}. <br>\n    <strong>Date:</strong> ${date}. <br>\n    <strong>Hour:</strong> ${hour}. <br>`\n\n    const servicesList = document.createElement('ul');\n    servicesList.classList.add('overview-list')\n\n    total = 0\n    services.forEach(service => {\n        const { name, price } = service;\n        const serviceItem = document.createElement('li');\n        serviceItem.classList.add('overview-item')\n        serviceItem.innerHTML = `${name}. <br> <strong>${price}</strong>`;\n        servicesList.appendChild(serviceItem);\n\n        // Sum of total amount\n        priceArray = price.split(' ');\n\n        total += parseInt(priceArray[1]);\n    });\n    const totalAmount = document.createElement('p');\n    totalAmount.innerHTML = `<strong>Total:</strong> $ ${total} MXN`;\n    totalAmount.classList.add('total')\n\n    overviewDiv.appendChild(headingServices);\n    overviewDiv.appendChild(servicesList);\n    overviewDiv.appendChild(totalAmount)\n}"]}