let page=2;const appointment={name:"",date:"",hour:"",services:[]};function startApp(){showServices(),showSection(),changeTabs(),pageButtons(),hiddenButtons(),clientName(),clientDate(),unableLastDay(),clientTime(),emptyAlert("",""),showOverview()}document.addEventListener("DOMContentLoaded",(function(){startApp()}));let alert=document.createElement("p");function emptyAlert(e,t){alert.classList.remove("d-none"),alert.classList.remove("red-alert"),alert.classList.remove("green-alert"),alert.textContent=""+e,alert.classList.add(t+"-alert");document.querySelector("#tab-"+page).appendChild(alert),setTimeout(()=>{alert.classList.add("d-none")},5e3)}function clientName(){formName=document.querySelector("#name"),formName.addEventListener("input",e=>{const t=e.target.value.trim();""===t||t.length<3?emptyAlert("Invalid name, too short, unless you are E.T. (I want to go home too)","red"):(appointment.name=t,emptyAlert("That's right, now fill the others please :)","green"))})}function clientDate(){formDate=document.querySelector("#date"),formDate.addEventListener("input",e=>{const t=new Date(e.target.value).getUTCDay();[3].includes(t)?(e.preventDefault(),formDate.value="",emptyAlert("Sorry. We don't work on Wednesday :(","red")):appointment.date=formDate.value})}function clientTime(){formTime=document.querySelector("#time"),formTime.addEventListener("input",e=>{const t=e.target.value,n=t.split(":");n[0]<9||n[0]>18?(emptyAlert("Sorry. We're closed at that time :(","red"),formTime.value=""):(appointment.hour=t,emptyAlert("Perfect time :)","green"),console.log(appointment))})}function addService(e){const{services:t}=appointment;appointment.services=[...t,e]}function removeService(e){const{services:t}=appointment;appointment.services=t.filter(t=>t.id!==e)}function hiddenButtons(){const e=document.querySelector("#back-btn"),t=document.querySelector("#next-btn");1===page?(t.classList.remove("hide"),e.classList.add("hide")):3===page?(e.classList.remove("hide"),t.classList.add("hide"),showOverview()):(e.classList.remove("hide"),t.classList.remove("hide"))}function pageButtons(){const e=document.querySelector("#back-btn"),t=document.querySelector("#next-btn");e.addEventListener("click",backPage),t.addEventListener("click",nextPage)}function backPage(){page<=3&&page>=2&&(page--,document.querySelector(".show-section").classList.remove("show-section"),document.querySelector(".active").classList.remove("active"),showSection())}function nextPage(){page<=2&&page>=1&&(page++,document.querySelector(".show-section").classList.remove("show-section"),document.querySelector(".active").classList.remove("active"),showSection())}function showSection(){document.querySelector("#tab-"+page).classList.add("show-section");document.querySelector(`[data-tab="${page}"]`).classList.add("active"),hiddenButtons()}function changeTabs(){document.querySelectorAll(".tabs button").forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),page=parseInt(e.target.dataset.tab),document.querySelector(".show-section").classList.remove("show-section"),document.querySelector(".active").classList.remove("active");document.querySelector("#tab-"+page).classList.add("show-section");document.querySelector(`[data-tab="${page}"]`).classList.add("active"),hiddenButtons()})})}async function showServices(){try{const e=await fetch("./servicios.json"),t=await e.json(),{servicios:n}=t;n.forEach(e=>{const{id:t,nombre:n,precio:s}=e,o=document.createElement("p");o.textContent=n,o.classList.add("service-name");const a=document.createElement("p");a.textContent=`$ ${s} MXN`,a.classList.add("service-price");const c=document.createElement("div");c.classList.add("service"),c.onclick=clickService,c.dataset.serviceId=t,c.appendChild(o),c.appendChild(a);document.querySelector(".services-list").appendChild(c)})}catch(e){console.log(e)}}function clickService(e){let t;if(t="P"===e.target.tagName?e.target.parentElement:e.target,t.classList.contains("select")){t.classList.remove("select");removeService(parseInt(t.dataset.serviceId))}else{t.classList.add("select");addService({id:parseInt(t.dataset.serviceId),name:t.firstChild.textContent,price:t.firstChild.nextElementSibling.textContent})}}function unableLastDay(){const e=document.querySelector("#date"),t=new Date,n=t.getFullYear(),s=t.getMonth()+1,o=t.getDate()+1,a=`${n}-${s<10?"0"+s:s}-${o<10?"0"+o:o}`;e.min=a}function showOverview(){const e=document.querySelector(".overview-content");for(;e.firstChild;)e.removeChild(e.firstChild);const t=document.createElement("h3"),n=document.createElement("h3");t.textContent="Contact information",n.textContent="Chosen services",e.appendChild(t),t.classList.add("d-none");const s=document.createElement("p");if(s.classList.add("overview-text"),s.classList.add("text-center"),e.appendChild(s),Object.values(appointment).includes(""))return void(s.textContent="You must fill all the fields to see this section...");t.classList.remove("d-none"),s.classList.remove("text-center");const{name:o,date:a,hour:c,services:r}=appointment;s.innerHTML=`<strong>Name:</strong> ${o}. <br>\n    <strong>Date:</strong> ${a}. <br>\n    <strong>Hour:</strong> ${c}. <br>`;const i=document.createElement("ul");i.classList.add("overview-list"),total=0,r.forEach(e=>{const{name:t,price:n}=e,s=document.createElement("li");s.classList.add("overview-item"),s.innerHTML=`${t}. <br> <strong>${n}</strong>`,i.appendChild(s),priceArray=n.split(" "),total+=parseInt(priceArray[1])});const l=document.createElement("p");l.innerHTML=`<strong>Total:</strong> $ ${total} MXN`,l.classList.add("total"),e.appendChild(n),e.appendChild(i),e.appendChild(l)}
//# sourceMappingURL=bundle.js.map
